<% content_for :title, "Dicty12: Admin" %>

<%= javascript_include_tag "jquery.dataTables.nightly", "jquery", "jquery-dataTables" %>
<%= stylesheet_link_tag "jquery-dataTables", "jquery-ui-overcast" %>

<script type="text/javascript">
	$(document).ready(function() {
		$('#users').dataTable( {
			"sScrollX": "250px",
			"bJQueryUI": true,
        	"bPaginate": true,
            "sPaginationType": "two_button", //"full_numbers",
        	"bLengthChange": true,
        	"bSort": true,
        	//"bInfo": false,
        	"bAutoWidth": true
    	} );
	} );
</script>

<% if is_admin? and logged_in? %>
	<h4>You are logged in as an ADMIN</h4>
	<h3>Registrations for Annual International Dictyostelium Conference 2012</h3>
	<br/>
	<table cellpadding="0" cellspacing="0" border="0" class="display" id="users">
  		<thead>
    		<tr>
      			<th>First Name</th>
      			<th>Last name</th>
      			<th>Email</th>
                <th>Registered on</th>
                <th>Affiliation</th>
      			<th>Country</th>
      			<th>Phone</th>
      			<th>VAT #</th>
      			<th>Accommodation</th>
                <th>Payment due</th>
                <th>Comments</th>
    		</tr>
  		</thead>
  		<tbody>
          <% (User.find(:all, :conditions => {:is_registered => true})).each do |user| %>
      	  <tr id="<%= dom_id(user) %>">
       		<td><%= user.first_name %></td>
       		<td><%= user.last_name %></td>
       		<td><%= user.email %></td>
            <td><%= l user.created_at.to_date, :format => :long %></td>
        	<td><%= user.institute %></td>
        	<td><%= user.country %></td>
        	<td><%= user.phone %></td>
        	<td><%= user.billing_id %></td>
        	<td><%= user.accommodation_type %></td>
            <td><%= user.payment_due %></td>
            <td><%= user.comment %></td>
          </tr>  
    	  <% end %>
  		</tbody>
	</table>
<% end %>

